{"remainingRequest":"/home/pi/homer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/homer/src/components/ConnectivityChecker.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pi/homer/src/components/ConnectivityChecker.vue","mtime":1654015932568},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29ubmVjdGl2aXR5Q2hlY2tlciIsCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgb2ZmbGluZTogZmFsc2UsCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gKCkgewogICAgbGV0IHRoYXQgPSB0aGlzOwogICAgdGhpcy5jaGVja09mZmxpbmUoKTsKCiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKAogICAgICAidmlzaWJpbGl0eWNoYW5nZSIsCiAgICAgIGZ1bmN0aW9uICgpIHsKICAgICAgICBpZiAoZG9jdW1lbnQudmlzaWJpbGl0eVN0YXRlID09ICJ2aXNpYmxlIikgewogICAgICAgICAgdGhhdC5jaGVja09mZmxpbmUoKTsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGZhbHNlCiAgICApOwogIH0sCiAgbWV0aG9kczogewogICAgY2hlY2tPZmZsaW5lOiBmdW5jdGlvbiAoKSB7CiAgICAgIGxldCB0aGF0ID0gdGhpczsKICAgICAgcmV0dXJuIGZldGNoKHdpbmRvdy5sb2NhdGlvbi5ocmVmICsgIj9hbGl2ZSIsIHsKICAgICAgICBtZXRob2Q6ICJIRUFEIiwKICAgICAgICBjYWNoZTogIm5vLXN0b3JlIiwKICAgICAgfSkKICAgICAgICAudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICAgIHRoYXQub2ZmbGluZSA9ICFyZXNwb25zZS5vazsKICAgICAgICB9KQogICAgICAgIC5jYXRjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0aGF0Lm9mZmxpbmUgPSB0cnVlOwogICAgICAgIH0pCiAgICAgICAgLmZpbmFsbHkoZnVuY3Rpb24gKCkgewogICAgICAgICAgdGhhdC4kZW1pdCgibmV0d29yay1zdGF0dXMtdXBkYXRlIiwgdGhhdC5vZmZsaW5lKTsKICAgICAgICB9KTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["ConnectivityChecker.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ConnectivityChecker.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div v-if=\"offline\" class=\"offline-message\">\n    <i class=\"far fa-dizzy\"></i>\n    <h1>\n      You're offline friend.\n      <span @click=\"checkOffline\"> <i class=\"fas fa-redo-alt\"></i></span>\n    </h1>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"ConnectivityChecker\",\n  data: function () {\n    return {\n      offline: false,\n    };\n  },\n  created: function () {\n    let that = this;\n    this.checkOffline();\n\n    document.addEventListener(\n      \"visibilitychange\",\n      function () {\n        if (document.visibilityState == \"visible\") {\n          that.checkOffline();\n        }\n      },\n      false\n    );\n  },\n  methods: {\n    checkOffline: function () {\n      let that = this;\n      return fetch(window.location.href + \"?alive\", {\n        method: \"HEAD\",\n        cache: \"no-store\",\n      })\n        .then(function (response) {\n          that.offline = !response.ok;\n        })\n        .catch(function () {\n          that.offline = true;\n        })\n        .finally(function () {\n          that.$emit(\"network-status-update\", that.offline);\n        });\n    },\n  },\n};\n</script>\n"]}]}