{"remainingRequest":"/home/pi/homer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/homer/src/components/services/Portainer.vue?vue&type=style&index=0&id=65419242&scoped=true&lang=scss&","dependencies":[{"path":"/home/pi/homer/src/components/services/Portainer.vue","mtime":1654015932568},{"path":"/home/pi/homer/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoubm90aWZzIHsKICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgY29sb3I6IHdoaXRlOwogIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmOwogIHRvcDogMC4zZW07CiAgcmlnaHQ6IDAuNWVtOwoKICAubm90aWYgewogICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgcGFkZGluZzogMC4yZW0gMC4zNWVtOwogICAgYm9yZGVyLXJhZGl1czogMC4yNWVtOwogICAgcG9zaXRpb246IHJlbGF0aXZlOwogICAgbWFyZ2luLWxlZnQ6IDAuM2VtOwogICAgZm9udC1zaXplOiAwLjhlbTsKCiAgICAmLnJ1bm5pbmcgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNGZkNjcxOwogICAgfQoKICAgICYuZGVhZCB7CiAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlNTExMTE7CiAgICB9CgogICAgJi5taXNjIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzJlZDBjODsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Portainer.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8GA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"Portainer.vue","sourceRoot":"src/components/services","sourcesContent":["<template>\n  <Generic :item=\"item\">\n    <template #indicator>\n      <div class=\"notifs\">\n        <strong v-if=\"running > 0\" class=\"notif running\" title=\"Running\">\n          {{ running }}\n        </strong>\n        <strong v-if=\"dead > 0\" class=\"notif dead\" title=\"Dead\">\n          {{ dead }}\n        </strong>\n        <strong\n          v-if=\"misc > 0\"\n          class=\"notif misc\"\n          title=\"Other (creating, paused, exited, etc.)\"\n        >\n          {{ misc }}\n        </strong>\n      </div>\n    </template>\n  </Generic>\n</template>\n\n<script>\nimport service from \"@/mixins/service.js\";\nimport Generic from \"./Generic.vue\";\n\nexport default {\n  name: \"Portainer\",\n  mixins: [service],\n  props: {\n    item: Object,\n  },\n  components: {\n    Generic,\n  },\n  data: () => ({\n    endpoints: null,\n    containers: null,\n  }),\n  computed: {\n    running: function () {\n      if (!this.containers) {\n        return \"\";\n      }\n      return this.containers.filter((container) => {\n        return container.State.toLowerCase() === \"running\";\n      }).length;\n    },\n    dead: function () {\n      if (!this.containers) {\n        return \"\";\n      }\n      return this.containers.filter((container) => {\n        return container.State.toLowerCase() === \"dead\";\n      }).length;\n    },\n    misc: function () {\n      if (!this.containers) {\n        return \"\";\n      }\n      return this.containers.filter((container) => {\n        return (\n          container.State.toLowerCase() !== \"running\" &&\n          container.State.toLowerCase() !== \"dead\"\n        );\n      }).length;\n    },\n  },\n  created() {\n    this.fetchStatus();\n  },\n  methods: {\n    fetchStatus: async function () {\n      const headers = {\n        \"X-Api-Key\": this.item.apikey,\n      };\n\n      this.endpoints = await this.fetch(\"/api/endpoints\", { headers }).catch(\n        (e) => {\n          console.error(e);\n        }\n      );\n\n      let containers = [];\n      for (let endpoint of this.endpoints) {\n        if (\n          this.item.environments &&\n          !this.item.environments.includes(endpoint.Name)\n        ) {\n          continue;\n        }\n        const uri = `/api/endpoints/${endpoint.Id}/docker/containers/json?all=1`;\n        const endpointContainers = await this.fetch(uri, { headers }).catch(\n          (e) => {\n            console.error(e);\n          }\n        );\n\n        if (endpointContainers) {\n          containers = containers.concat(endpointContainers);\n        }\n      }\n\n      this.containers = containers;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.notifs {\n  position: absolute;\n  color: white;\n  font-family: sans-serif;\n  top: 0.3em;\n  right: 0.5em;\n\n  .notif {\n    display: inline-block;\n    padding: 0.2em 0.35em;\n    border-radius: 0.25em;\n    position: relative;\n    margin-left: 0.3em;\n    font-size: 0.8em;\n\n    &.running {\n      background-color: #4fd671;\n    }\n\n    &.dead {\n      background-color: #e51111;\n    }\n\n    &.misc {\n      background-color: #2ed0c8;\n    }\n  }\n}\n</style>\n"]}]}