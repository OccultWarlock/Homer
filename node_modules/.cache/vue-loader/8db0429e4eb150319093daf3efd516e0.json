{"remainingRequest":"/home/pi/homer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/homer/src/components/services/OpenWeather.vue?vue&type=style&index=0&id=d2475b9c&scoped=true&lang=scss&","dependencies":[{"path":"/home/pi/homer/src/components/services/OpenWeather.vue","mtime":1654015932568},{"path":"/home/pi/homer/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLy8gQWRkIGEgYm9yZGVyIGFyb3VuZCB0aGUgd2VhdGhlciBpbWFnZS4KLy8gT3RoZXJ3aXNlIHRoZSBpbWFnZSBpcyBub3QgYWx3YXlzIGRpc3Rpbmd1aXNoYWJsZS4KLm1lZGlhLWxlZnQgewogICYuY2lyY2xlLAogICYuc3F1YXJlIHsKICAgIGJhY2tncm91bmQtY29sb3I6ICNlNGU0ZTQ7CiAgfQoKICAmLmNpcmNsZSB7CiAgICBib3JkZXItcmFkaXVzOiA5MCU7CiAgfQoKICBpbWcgewogICAgbWF4LWhlaWdodDogMTAwJTsKICB9Cn0KCi5lcnJvciB7CiAgY29sb3I6ICNkZTAwMDA7Cn0KCi8vIENoYW5nZSBiYWNrZ3JvdW5kIGNvbG9yIGluIGRhcmsgbW9kZS4KLmlzLWRhcmsgewogIC5tZWRpYS1sZWZ0IHsKICAgICYuY2lyY2xlLAogICAgJi5zcXVhcmUgewogICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTA5MDkwOwogICAgfQogIH0KfQo="},{"version":3,"sources":["OpenWeather.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"OpenWeather.vue","sourceRoot":"src/components/services","sourcesContent":["<template>\n  <div>\n    <div class=\"card\" :class=\"item.class\">\n      <a\n        :href=\"`https://openweathermap.org/city/${id}`\"\n        :target=\"item.target\"\n        rel=\"noreferrer\"\n      >\n        <div class=\"card-content\">\n          <div class=\"media\">\n            <div v-if=\"icon\" class=\"media-left\" :class=\"item.background\">\n              <figure class=\"image is-48x48\">\n                <img\n                  :src=\"`https://openweathermap.org/img/wn/${icon}@2x.png`\"\n                  :alt=\"conditions\"\n                  :title=\"conditions\"\n                />\n              </figure>\n            </div>\n            <div class=\"media-content\">\n              <p v-if=\"error\" class=\"error\">Data could not be retrieved</p>\n              <div v-else>\n                <p class=\"title is-4\">{{ name }}</p>\n                <p class=\"subtitle is-6\">\n                  {{ temp | tempSuffix(this.item.units) }}\n                </p>\n              </div>\n            </div>\n          </div>\n          <div class=\"tag\" :class=\"item.tagstyle\" v-if=\"item.tag\">\n            <strong class=\"tag-text\">#{{ item.tag }}</strong>\n          </div>\n        </div>\n      </a>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"OpenWeather\",\n  props: {\n    item: Object,\n  },\n  data: () => ({\n    id: null,\n    icon: null,\n    name: null,\n    temp: null,\n    conditions: null,\n    error: false,\n  }),\n  created() {\n    this.fetchWeather();\n  },\n  methods: {\n    fetchWeather: async function () {\n      let locationQuery;\n\n      // Use location ID if specified, otherwise retrieve value from location (name).\n      if (this.item.locationId) {\n        locationQuery = `id=${this.item.locationId}`;\n      } else {\n        locationQuery = `q=${this.item.location}`;\n      }\n\n      const apiKey = this.item.apikey || this.item.apiKey;\n      const url = `https://api.openweathermap.org/data/2.5/weather?${locationQuery}&appid=${apiKey}&units=${this.item.units}`;\n      fetch(url)\n        .then((response) => {\n          if (!response.ok) {\n            throw Error(response.statusText);\n          }\n          return response.json();\n        })\n        .then((weather) => {\n          this.id = weather.id;\n          this.name = weather.name;\n          this.temp = parseInt(weather.main.temp).toFixed(1);\n          this.icon = weather.weather[0].icon;\n          this.conditions = weather.weather[0].description;\n        })\n        .catch((e) => {\n          console.log(e);\n          this.error = true;\n        });\n    },\n  },\n  filters: {\n    tempSuffix: function (value, type) {\n      if (!value) return \"\";\n\n      let unit = \"K\";\n      if (type === \"metric\") {\n        unit = \"°C\";\n      } else if (type === \"imperial\") {\n        unit = \"°F\";\n      }\n      return `${value} ${unit}`;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n// Add a border around the weather image.\n// Otherwise the image is not always distinguishable.\n.media-left {\n  &.circle,\n  &.square {\n    background-color: #e4e4e4;\n  }\n\n  &.circle {\n    border-radius: 90%;\n  }\n\n  img {\n    max-height: 100%;\n  }\n}\n\n.error {\n  color: #de0000;\n}\n\n// Change background color in dark mode.\n.is-dark {\n  .media-left {\n    &.circle,\n    &.square {\n      background-color: #909090;\n    }\n  }\n}\n</style>\n"]}]}