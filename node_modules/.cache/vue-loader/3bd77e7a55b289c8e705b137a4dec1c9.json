{"remainingRequest":"/home/pi/homer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/homer/src/components/SearchInput.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pi/homer/src/components/SearchInput.vue","mtime":1654015932568},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiU2VhcmNoSW5wdXQiLAogIHByb3BzOiB7CiAgICB2YWx1ZTogU3RyaW5nLAogICAgaG90a2V5OiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogIi8iLAogICAgfSwKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLl9rZXlMaXN0ZW5lciA9IGZ1bmN0aW9uIChldmVudCkgewogICAgICBpZiAoZXZlbnQua2V5ID09PSB0aGlzLmhvdGtleSkgewogICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdGhpcy5mb2N1cygpOwogICAgICB9CiAgICAgIGlmIChldmVudC5rZXkgPT09ICJFc2NhcGUiKSB7CiAgICAgICAgdGhpcy5jYW5jZWwoKTsKICAgICAgfQogICAgfTsKICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLl9rZXlMaXN0ZW5lci5iaW5kKHRoaXMpKTsKCiAgICAvLyBmaWxsIHNlYXJjaCBmcm9tIGdldCBwYXJhbWV0ZXIuCiAgICBjb25zdCBzZWFyY2ggPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpLmdldCgic2VhcmNoIik7CiAgICBpZiAoc2VhcmNoKSB7CiAgICAgIHRoaXMuJHJlZnMuc2VhcmNoLnZhbHVlID0gc2VhcmNoOwogICAgICB0aGlzLnNlYXJjaChzZWFyY2gpOwogICAgICB0aGlzLmZvY3VzKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvcGVuOiBmdW5jdGlvbiAodGFyZ2V0ID0gbnVsbCkgewogICAgICBpZiAoIXRoaXMuJHJlZnMuc2VhcmNoLnZhbHVlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoInNlYXJjaC1vcGVuIiwgdGFyZ2V0KTsKICAgIH0sCiAgICBmb2N1czogZnVuY3Rpb24gKCkgewogICAgICB0aGlzLiRlbWl0KCJzZWFyY2gtZm9jdXMiKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIHRoaXMuJHJlZnMuc2VhcmNoLmZvY3VzKCk7CiAgICAgIH0pOwogICAgfSwKICAgIHNldFNlYXJjaFVSTDogZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgIGNvbnN0IHVybCA9IG5ldyBVUkwod2luZG93LmxvY2F0aW9uKTsKICAgICAgaWYgKHZhbHVlID09PSAiIikgewogICAgICAgIHVybC5zZWFyY2hQYXJhbXMuZGVsZXRlKCJzZWFyY2giKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB1cmwuc2VhcmNoUGFyYW1zLnNldCgic2VhcmNoIiwgdmFsdWUpOwogICAgICB9CiAgICAgIHdpbmRvdy5oaXN0b3J5LnJlcGxhY2VTdGF0ZSgic2VhcmNoIiwgbnVsbCwgdXJsKTsKICAgIH0sCiAgICBjYW5jZWw6IGZ1bmN0aW9uICgpIHsKICAgICAgdGhpcy5zZXRTZWFyY2hVUkwoIiIpOwogICAgICB0aGlzLiRyZWZzLnNlYXJjaC52YWx1ZSA9ICIiOwogICAgICB0aGlzLiRyZWZzLnNlYXJjaC5ibHVyKCk7CiAgICAgIHRoaXMuJGVtaXQoInNlYXJjaC1jYW5jZWwiKTsKICAgIH0sCiAgICBzZWFyY2g6IGZ1bmN0aW9uICh2YWx1ZSkgewogICAgICB0aGlzLnNldFNlYXJjaFVSTCh2YWx1ZSk7CiAgICAgIHRoaXMuJGVtaXQoImlucHV0IiwgdmFsdWUudG9Mb3dlckNhc2UoKSk7CiAgICB9LAogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoImtleWRvd24iLCB0aGlzLl9rZXlMaXN0ZW5lcik7CiAgfSwKfTsK"},{"version":3,"sources":["SearchInput.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SearchInput.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div class=\"search-bar\">\n    <label for=\"search\" class=\"search-label\"></label>\n    <input\n      type=\"text\"\n      ref=\"search\"\n      :value=\"value\"\n      @input=\"search($event.target.value)\"\n      @keyup.enter.exact=\"open()\"\n      @keyup.alt.enter=\"open('_blank')\"\n    />\n  </div>\n</template>\n\n<script>\nexport default {\n  name: \"SearchInput\",\n  props: {\n    value: String,\n    hotkey: {\n      type: String,\n      default: \"/\",\n    },\n  },\n  mounted() {\n    this._keyListener = function (event) {\n      if (event.key === this.hotkey) {\n        event.preventDefault();\n        this.focus();\n      }\n      if (event.key === \"Escape\") {\n        this.cancel();\n      }\n    };\n    document.addEventListener(\"keydown\", this._keyListener.bind(this));\n\n    // fill search from get parameter.\n    const search = new URLSearchParams(window.location.search).get(\"search\");\n    if (search) {\n      this.$refs.search.value = search;\n      this.search(search);\n      this.focus();\n    }\n  },\n  methods: {\n    open: function (target = null) {\n      if (!this.$refs.search.value) {\n        return;\n      }\n      this.$emit(\"search-open\", target);\n    },\n    focus: function () {\n      this.$emit(\"search-focus\");\n      this.$nextTick(() => {\n        this.$refs.search.focus();\n      });\n    },\n    setSearchURL: function (value) {\n      const url = new URL(window.location);\n      if (value === \"\") {\n        url.searchParams.delete(\"search\");\n      } else {\n        url.searchParams.set(\"search\", value);\n      }\n      window.history.replaceState(\"search\", null, url);\n    },\n    cancel: function () {\n      this.setSearchURL(\"\");\n      this.$refs.search.value = \"\";\n      this.$refs.search.blur();\n      this.$emit(\"search-cancel\");\n    },\n    search: function (value) {\n      this.setSearchURL(value);\n      this.$emit(\"input\", value.toLowerCase());\n    },\n  },\n  beforeDestroy() {\n    document.removeEventListener(\"keydown\", this._keyListener);\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped></style>\n"]}]}