{"remainingRequest":"/home/pi/homer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/homer/src/components/services/UptimeKuma.vue?vue&type=style&index=0&id=5762d847&scoped=true&lang=scss&","dependencies":[{"path":"/home/pi/homer/src/components/services/UptimeKuma.vue","mtime":1654015932568},{"path":"/home/pi/homer/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5zdGF0dXMgewogIGZvbnQtc2l6ZTogMC44cmVtOwogIGNvbG9yOiB2YXIoLS10ZXh0LXRpdGxlKTsKCiAgJi5nb29kOmJlZm9yZSB7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjOTRlMTg1OwogICAgYm9yZGVyLWNvbG9yOiAjNzhkOTY1OwogICAgYm94LXNoYWRvdzogMCAwIDVweCAxcHggIzk0ZTE4NTsKICB9CgogICYud2FybjpiZWZvcmUgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2Y4YTMwNjsKICAgIGJvcmRlci1jb2xvcjogI2UxYjM1ZTsKICAgIGJveC1zaGFkb3c6IDAgMCA1cHggMXB4ICNmOGEzMDY7CiAgfQoKICAmLmJhZDpiZWZvcmUgewogICAgYmFja2dyb3VuZC1jb2xvcjogI2M5NDA0ZDsKICAgIGJvcmRlci1jb2xvcjogI2M0MmMzYjsKICAgIGJveC1zaGFkb3c6IDAgMCA1cHggMXB4ICNjOTQwNGQ7CiAgfQoKICAmOmJlZm9yZSB7CiAgICBjb250ZW50OiAiICI7CiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7CiAgICB3aWR0aDogN3B4OwogICAgaGVpZ2h0OiA3cHg7CiAgICBtYXJnaW4tcmlnaHQ6IDEwcHg7CiAgICBib3JkZXI6IDFweCBzb2xpZCAjMDAwOwogICAgYm9yZGVyLXJhZGl1czogN3B4OwogIH0KfQo="},{"version":3,"sources":["UptimeKuma.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyHA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UptimeKuma.vue","sourceRoot":"src/components/services","sourcesContent":["<template>\n  <Generic :item=\"item\">\n    <template #content>\n      <p class=\"title is-4\">{{ item.name }}</p>\n      <p class=\"subtitle is-6\">\n        <template v-if=\"item.subtitle\">\n          {{ item.subtitle }}\n        </template>\n        <template v-else-if=\"status\">\n          {{ statusMessage }}\n        </template>\n      </p>\n    </template>\n    <template #indicator>\n      <div v-if=\"status\" class=\"status\" :class=\"status\">\n        {{ uptime }}&percnt;\n      </div>\n    </template>\n  </Generic>\n</template>\n\n<script>\nimport service from \"@/mixins/service.js\";\nimport Generic from \"./Generic.vue\";\n\nexport default {\n  name: \"UptimeKuma\",\n  mixins: [service],\n  props: {\n    item: Object,\n  },\n  components: {\n    Generic,\n  },\n  data: () => ({\n    incident: null,\n    heartbeat: null,\n  }),\n  computed: {\n    dashboard: function () {\n      return this.item.slug ? this.item.slug : \"default\";\n    },\n    status: function () {\n      if (!this.incident) {\n        return \"\";\n      }\n      return this.incident.incident == null ? this.pageStatus : \"bad\";\n    },\n    lastHeartBeatList: function () {\n      let result = {};\n\n      for (let id in this.heartbeat.heartbeatList) {\n        let index = this.heartbeat.heartbeatList[id].length - 1;\n        result[id] = this.heartbeat.heartbeatList[id][index];\n      }\n\n      return result;\n    },\n    pageStatus: function () {\n      if (!this.heartbeat) {\n        return \"\";\n      }\n      if (Object.keys(this.heartbeat.heartbeatList).length === 0) {\n        return \"\";\n      }\n      let result = \"good\";\n      let hasUp = false;\n      for (let id in this.lastHeartBeatList) {\n        let beat = this.lastHeartBeatList[id];\n        if (beat.status == 1) {\n          hasUp = true;\n        } else {\n          result = \"warn\";\n        }\n      }\n      if (!hasUp) {\n        result = \"bad\";\n      }\n      return result;\n    },\n    statusMessage: function () {\n      if (!this.incident) {\n        return \"\";\n      }\n      if (this.incident.incident) {\n        return this.incident.incident.title;\n      }\n      return this.pageStatus == \"warn\"\n        ? \"Partially Degraded Service\"\n        : \"All Systems Operational\";\n    },\n    uptime: function () {\n      if (!this.heartbeat) {\n        return 0;\n      }\n      const data = Object.values(this.heartbeat.uptimeList);\n      const percent = data.reduce((a, b) => a + b, 0) / data.length || 0;\n      return (percent * 100).toFixed(1);\n    },\n  },\n  created() {\n    this.item.url = `${this.item.url}/status/${this.dashboard}`;\n    this.fetchStatus();\n  },\n  methods: {\n    fetchStatus: function () {\n      this.fetch(`/api/status-page/${this.dashboard}?cachebust=${Date.now()}`)\n        .catch((e) => console.error(e))\n        .then((resp) => (this.incident = resp));\n\n      this.fetch(\n        `/api/status-page/heartbeat/${this.dashboard}?cachebust=${Date.now()}`\n      )\n        .catch((e) => console.error(e))\n        .then((resp) => (this.heartbeat = resp));\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.status {\n  font-size: 0.8rem;\n  color: var(--text-title);\n\n  &.good:before {\n    background-color: #94e185;\n    border-color: #78d965;\n    box-shadow: 0 0 5px 1px #94e185;\n  }\n\n  &.warn:before {\n    background-color: #f8a306;\n    border-color: #e1b35e;\n    box-shadow: 0 0 5px 1px #f8a306;\n  }\n\n  &.bad:before {\n    background-color: #c9404d;\n    border-color: #c42c3b;\n    box-shadow: 0 0 5px 1px #c9404d;\n  }\n\n  &:before {\n    content: \" \";\n    display: inline-block;\n    width: 7px;\n    height: 7px;\n    margin-right: 10px;\n    border: 1px solid #000;\n    border-radius: 7px;\n  }\n}\n</style>\n"]}]}