{"remainingRequest":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js!/home/pi/homer/node_modules/babel-loader/lib/index.js!/home/pi/homer/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/pi/homer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/homer/src/components/services/Portainer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pi/homer/src/components/services/Portainer.vue","mtime":1654015932568},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIi9ob21lL3BpL2hvbWVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3BpL2hvbWVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCBzZXJ2aWNlIGZyb20gIkAvbWl4aW5zL3NlcnZpY2UuanMiOwppbXBvcnQgR2VuZXJpYyBmcm9tICIuL0dlbmVyaWMudnVlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJQb3J0YWluZXIiLAogIG1peGluczogW3NlcnZpY2VdLAogIHByb3BzOiB7CiAgICBpdGVtOiBPYmplY3QKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEdlbmVyaWM6IEdlbmVyaWMKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBlbmRwb2ludHM6IG51bGwsCiAgICAgIGNvbnRhaW5lcnM6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcnVubmluZzogZnVuY3Rpb24gcnVubmluZygpIHsKICAgICAgaWYgKCF0aGlzLmNvbnRhaW5lcnMpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcnMuZmlsdGVyKGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICByZXR1cm4gY29udGFpbmVyLlN0YXRlLnRvTG93ZXJDYXNlKCkgPT09ICJydW5uaW5nIjsKICAgICAgfSkubGVuZ3RoOwogICAgfSwKICAgIGRlYWQ6IGZ1bmN0aW9uIGRlYWQoKSB7CiAgICAgIGlmICghdGhpcy5jb250YWluZXJzKSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5jb250YWluZXJzLmZpbHRlcihmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgcmV0dXJuIGNvbnRhaW5lci5TdGF0ZS50b0xvd2VyQ2FzZSgpID09PSAiZGVhZCI7CiAgICAgIH0pLmxlbmd0aDsKICAgIH0sCiAgICBtaXNjOiBmdW5jdGlvbiBtaXNjKCkgewogICAgICBpZiAoIXRoaXMuY29udGFpbmVycykgewogICAgICAgIHJldHVybiAiIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVycy5maWx0ZXIoZnVuY3Rpb24gKGNvbnRhaW5lcikgewogICAgICAgIHJldHVybiBjb250YWluZXIuU3RhdGUudG9Mb3dlckNhc2UoKSAhPT0gInJ1bm5pbmciICYmIGNvbnRhaW5lci5TdGF0ZS50b0xvd2VyQ2FzZSgpICE9PSAiZGVhZCI7CiAgICAgIH0pLmxlbmd0aDsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmZldGNoU3RhdHVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaFN0YXR1czogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX2ZldGNoU3RhdHVzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBoZWFkZXJzLCBjb250YWluZXJzLCBfaXRlcmF0b3IsIF9zdGVwLCBlbmRwb2ludCwgdXJpLCBlbmRwb2ludENvbnRhaW5lcnM7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGhlYWRlcnMgPSB7CiAgICAgICAgICAgICAgICAgICJYLUFwaS1LZXkiOiB0aGlzLml0ZW0uYXBpa2V5CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5mZXRjaCgiL2FwaS9lbmRwb2ludHMiLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdGhpcy5lbmRwb2ludHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgY29udGFpbmVycyA9IFtdOwogICAgICAgICAgICAgICAgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIodGhpcy5lbmRwb2ludHMpOwogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDY7CgogICAgICAgICAgICAgICAgX2l0ZXJhdG9yLnMoKTsKCiAgICAgICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICAgICAgaWYgKChfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBlbmRwb2ludCA9IF9zdGVwLnZhbHVlOwoKICAgICAgICAgICAgICAgIGlmICghKHRoaXMuaXRlbS5lbnZpcm9ubWVudHMgJiYgIXRoaXMuaXRlbS5lbnZpcm9ubWVudHMuaW5jbHVkZXMoZW5kcG9pbnQuTmFtZSkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgiY29udGludWUiLCAxNyk7CgogICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICB1cmkgPSAiL2FwaS9lbmRwb2ludHMvIi5jb25jYXQoZW5kcG9pbnQuSWQsICIvZG9ja2VyL2NvbnRhaW5lcnMvanNvbj9hbGw9MSIpOwogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmV0Y2godXJpLCB7CiAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IGhlYWRlcnMKICAgICAgICAgICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAgIGVuZHBvaW50Q29udGFpbmVycyA9IF9jb250ZXh0LnNlbnQ7CgogICAgICAgICAgICAgICAgaWYgKGVuZHBvaW50Q29udGFpbmVycykgewogICAgICAgICAgICAgICAgICBjb250YWluZXJzID0gY29udGFpbmVycy5jb25jYXQoZW5kcG9pbnRDb250YWluZXJzKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyMTsKICAgICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oNik7CgogICAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoX2NvbnRleHQudDApOwoKICAgICAgICAgICAgICBjYXNlIDI0OgogICAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI0OwoKICAgICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmZpbmlzaCgyNCk7CgogICAgICAgICAgICAgIGNhc2UgMjc6CiAgICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcnMgPSBjb250YWluZXJzOwoKICAgICAgICAgICAgICBjYXNlIDI4OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgdGhpcywgW1s2LCAyMSwgMjQsIDI3XV0pOwogICAgICB9KSk7CgogICAgICBmdW5jdGlvbiBmZXRjaFN0YXR1cygpIHsKICAgICAgICByZXR1cm4gX2ZldGNoU3RhdHVzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmZXRjaFN0YXR1czsKICAgIH0oKQogIH0KfTs="},{"version":3,"sources":["Portainer.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <Generic :item=\"item\">\n    <template #indicator>\n      <div class=\"notifs\">\n        <strong v-if=\"running > 0\" class=\"notif running\" title=\"Running\">\n          {{ running }}\n        </strong>\n        <strong v-if=\"dead > 0\" class=\"notif dead\" title=\"Dead\">\n          {{ dead }}\n        </strong>\n        <strong\n          v-if=\"misc > 0\"\n          class=\"notif misc\"\n          title=\"Other (creating, paused, exited, etc.)\"\n        >\n          {{ misc }}\n        </strong>\n      </div>\n    </template>\n  </Generic>\n</template>\n\n<script>\nimport service from \"@/mixins/service.js\";\nimport Generic from \"./Generic.vue\";\n\nexport default {\n  name: \"Portainer\",\n  mixins: [service],\n  props: {\n    item: Object,\n  },\n  components: {\n    Generic,\n  },\n  data: () => ({\n    endpoints: null,\n    containers: null,\n  }),\n  computed: {\n    running: function () {\n      if (!this.containers) {\n        return \"\";\n      }\n      return this.containers.filter((container) => {\n        return container.State.toLowerCase() === \"running\";\n      }).length;\n    },\n    dead: function () {\n      if (!this.containers) {\n        return \"\";\n      }\n      return this.containers.filter((container) => {\n        return container.State.toLowerCase() === \"dead\";\n      }).length;\n    },\n    misc: function () {\n      if (!this.containers) {\n        return \"\";\n      }\n      return this.containers.filter((container) => {\n        return (\n          container.State.toLowerCase() !== \"running\" &&\n          container.State.toLowerCase() !== \"dead\"\n        );\n      }).length;\n    },\n  },\n  created() {\n    this.fetchStatus();\n  },\n  methods: {\n    fetchStatus: async function () {\n      const headers = {\n        \"X-Api-Key\": this.item.apikey,\n      };\n\n      this.endpoints = await this.fetch(\"/api/endpoints\", { headers }).catch(\n        (e) => {\n          console.error(e);\n        }\n      );\n\n      let containers = [];\n      for (let endpoint of this.endpoints) {\n        if (\n          this.item.environments &&\n          !this.item.environments.includes(endpoint.Name)\n        ) {\n          continue;\n        }\n        const uri = `/api/endpoints/${endpoint.Id}/docker/containers/json?all=1`;\n        const endpointContainers = await this.fetch(uri, { headers }).catch(\n          (e) => {\n            console.error(e);\n          }\n        );\n\n        if (endpointContainers) {\n          containers = containers.concat(endpointContainers);\n        }\n      }\n\n      this.containers = containers;\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.notifs {\n  position: absolute;\n  color: white;\n  font-family: sans-serif;\n  top: 0.3em;\n  right: 0.5em;\n\n  .notif {\n    display: inline-block;\n    padding: 0.2em 0.35em;\n    border-radius: 0.25em;\n    position: relative;\n    margin-left: 0.3em;\n    font-size: 0.8em;\n\n    &.running {\n      background-color: #4fd671;\n    }\n\n    &.dead {\n      background-color: #e51111;\n    }\n\n    &.misc {\n      background-color: #2ed0c8;\n    }\n  }\n}\n</style>\n"],"sourceRoot":"src/components/services"}]}