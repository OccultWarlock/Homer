{"remainingRequest":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js!/home/pi/homer/node_modules/babel-loader/lib/index.js!/home/pi/homer/node_modules/eslint-loader/index.js??ref--14-0!/home/pi/homer/src/mixins/service.js","dependencies":[{"path":"/home/pi/homer/src/mixins/service.js","mtime":1654015932572},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pi/homer/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmVuZHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHByb3h5OiBPYmplY3QKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICAvLyBjdXN0b20gc2VydmljZSBvZnRlbiBjb25zdW1lIGluZm8gZnJvbSBhbiBBUEkgdXNpbmcgdGhlIGl0ZW0gbGluayAodXJsKSBhcyBhIGJhc2UgdXJsLAogICAgLy8gYnV0IHNvbWV0aW1lcyB0aGUgYmFzZSB1cmwgaXMgZGlmZmVyZW50LiBBbiBvcHRpb25hbCBhbHRlcm5hdGl2ZSBVUkwgY2FuIGJlIHByb3ZpZGVkIHdpdGggdGhlICJlbmRwb2ludCIga2V5LgogICAgdGhpcy5lbmRwb2ludCA9IHRoaXMuaXRlbS5lbmRwb2ludCB8fCB0aGlzLml0ZW0udXJsOwoKICAgIGlmICh0aGlzLmVuZHBvaW50LmVuZHNXaXRoKCIvIikpIHsKICAgICAgdGhpcy5lbmRwb2ludCA9IHRoaXMuZW5kcG9pbnQuc2xpY2UoMCwgLTEpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZmV0Y2g6IGZ1bmN0aW9uIChfZmV0Y2gpIHsKICAgICAgZnVuY3Rpb24gZmV0Y2goX3gsIF94MikgewogICAgICAgIHJldHVybiBfZmV0Y2guYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQoKICAgICAgZmV0Y2gudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaC50b1N0cmluZygpOwogICAgICB9OwoKICAgICAgcmV0dXJuIGZldGNoOwogICAgfShmdW5jdGlvbiAocGF0aCwgaW5pdCkgewogICAgICB2YXIgX3RoaXMkcHJveHk7CgogICAgICB2YXIganNvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdHJ1ZTsKICAgICAgdmFyIG9wdGlvbnMgPSB7fTsKCiAgICAgIGlmICgoX3RoaXMkcHJveHkgPSB0aGlzLnByb3h5KSAhPT0gbnVsbCAmJiBfdGhpcyRwcm94eSAhPT0gdm9pZCAwICYmIF90aGlzJHByb3h5LnVzZUNyZWRlbnRpYWxzKSB7CiAgICAgICAgb3B0aW9ucy5jcmVkZW50aWFscyA9ICJpbmNsdWRlIjsKICAgICAgfSAvLyBFYWNoIGl0ZW0gY2FuIG92ZXJyaWRlIHRoZSBjcmVkZW50aWFsIHNldHRpbmdzCgoKICAgICAgaWYgKHRoaXMuaXRlbS51c2VDcmVkZW50aWFscyAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgb3B0aW9ucy5jcmVkZW50aWFscyA9IHRoaXMuaXRlbS51c2VDcmVkZW50aWFscyA9PT0gdHJ1ZSA/ICJpbmNsdWRlIiA6ICJvbWl0IjsKICAgICAgfQoKICAgICAgb3B0aW9ucyA9IE9iamVjdC5hc3NpZ24ob3B0aW9ucywgaW5pdCk7CgogICAgICBpZiAocGF0aC5zdGFydHNXaXRoKCIvIikpIHsKICAgICAgICBwYXRoID0gcGF0aC5zbGljZSgxKTsKICAgICAgfQoKICAgICAgdmFyIHVybCA9IHRoaXMuZW5kcG9pbnQ7CgogICAgICBpZiAocGF0aCkgewogICAgICAgIHVybCA9ICIiLmNvbmNhdCh0aGlzLmVuZHBvaW50LCAiLyIpLmNvbmNhdChwYXRoKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZldGNoKHVybCwgb3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoIk5vdCAyeHggcmVzcG9uc2UiKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBqc29uID8gcmVzcG9uc2UuanNvbigpIDogcmVzcG9uc2U7CiAgICAgIH0pOwogICAgfSkKICB9Cn07"},{"version":3,"sources":["/home/pi/homer/src/mixins/service.js"],"names":["props","proxy","Object","created","endpoint","item","url","endsWith","slice","methods","fetch","path","init","json","options","useCredentials","credentials","undefined","assign","startsWith","then","response","ok","Error"],"mappings":";;;;;;AAAA,eAAe;AACbA,EAAAA,KAAK,EAAE;AACLC,IAAAA,KAAK,EAAEC;AADF,GADM;AAIbC,EAAAA,OAAO,EAAE,mBAAY;AACnB;AACA;AACA,SAAKC,QAAL,GAAgB,KAAKC,IAAL,CAAUD,QAAV,IAAsB,KAAKC,IAAL,CAAUC,GAAhD;;AAEA,QAAI,KAAKF,QAAL,CAAcG,QAAd,CAAuB,GAAvB,CAAJ,EAAiC;AAC/B,WAAKH,QAAL,GAAgB,KAAKA,QAAL,CAAcI,KAAd,CAAoB,CAApB,EAAuB,CAAC,CAAxB,CAAhB;AACD;AACF,GAZY;AAabC,EAAAA,OAAO,EAAE;AACPC,IAAAA,KAAK;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA,MAAE,UAAUC,IAAV,EAAgBC,IAAhB,EAAmC;AAAA;;AAAA,UAAbC,IAAa,uEAAN,IAAM;AACxC,UAAIC,OAAO,GAAG,EAAd;;AAEA,yBAAI,KAAKb,KAAT,wCAAI,YAAYc,cAAhB,EAAgC;AAC9BD,QAAAA,OAAO,CAACE,WAAR,GAAsB,SAAtB;AACD,OALuC,CAOxC;;;AACA,UAAI,KAAKX,IAAL,CAAUU,cAAV,KAA6BE,SAAjC,EAA4C;AAC1CH,QAAAA,OAAO,CAACE,WAAR,GACE,KAAKX,IAAL,CAAUU,cAAV,KAA6B,IAA7B,GAAoC,SAApC,GAAgD,MADlD;AAED;;AAEDD,MAAAA,OAAO,GAAGZ,MAAM,CAACgB,MAAP,CAAcJ,OAAd,EAAuBF,IAAvB,CAAV;;AAEA,UAAID,IAAI,CAACQ,UAAL,CAAgB,GAAhB,CAAJ,EAA0B;AACxBR,QAAAA,IAAI,GAAGA,IAAI,CAACH,KAAL,CAAW,CAAX,CAAP;AACD;;AAED,UAAIF,GAAG,GAAG,KAAKF,QAAf;;AAEA,UAAIO,IAAJ,EAAU;AACRL,QAAAA,GAAG,aAAM,KAAKF,QAAX,cAAuBO,IAAvB,CAAH;AACD;;AAED,aAAOD,KAAK,CAACJ,GAAD,EAAMQ,OAAN,CAAL,CAAoBM,IAApB,CAAyB,UAACC,QAAD,EAAc;AAC5C,YAAI,CAACA,QAAQ,CAACC,EAAd,EAAkB;AAChB,gBAAM,IAAIC,KAAJ,CAAU,kBAAV,CAAN;AACD;;AAED,eAAOV,IAAI,GAAGQ,QAAQ,CAACR,IAAT,EAAH,GAAqBQ,QAAhC;AACD,OANM,CAAP;AAOD,KAhCI;AADE;AAbI,CAAf","sourcesContent":["export default {\n  props: {\n    proxy: Object,\n  },\n  created: function () {\n    // custom service often consume info from an API using the item link (url) as a base url,\n    // but sometimes the base url is different. An optional alternative URL can be provided with the \"endpoint\" key.\n    this.endpoint = this.item.endpoint || this.item.url;\n\n    if (this.endpoint.endsWith(\"/\")) {\n      this.endpoint = this.endpoint.slice(0, -1);\n    }\n  },\n  methods: {\n    fetch: function (path, init, json = true) {\n      let options = {};\n\n      if (this.proxy?.useCredentials) {\n        options.credentials = \"include\";\n      }\n\n      // Each item can override the credential settings\n      if (this.item.useCredentials !== undefined) {\n        options.credentials =\n          this.item.useCredentials === true ? \"include\" : \"omit\";\n      }\n\n      options = Object.assign(options, init);\n\n      if (path.startsWith(\"/\")) {\n        path = path.slice(1);\n      }\n\n      let url = this.endpoint;\n\n      if (path) {\n        url = `${this.endpoint}/${path}`;\n      }\n\n      return fetch(url, options).then((response) => {\n        if (!response.ok) {\n          throw new Error(\"Not 2xx response\");\n        }\n\n        return json ? response.json() : response;\n      });\n    },\n  },\n};\n"]}]}