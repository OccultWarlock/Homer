{"remainingRequest":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js!/home/pi/homer/node_modules/babel-loader/lib/index.js!/home/pi/homer/node_modules/cache-loader/dist/cjs.js??ref--1-0!/home/pi/homer/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/pi/homer/src/components/services/UptimeKuma.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/pi/homer/src/components/services/UptimeKuma.vue","mtime":1654015932568},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/thread-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/pi/homer/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/pi/homer/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLnRvLWZpeGVkLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KaW1wb3J0IHNlcnZpY2UgZnJvbSAiQC9taXhpbnMvc2VydmljZS5qcyI7CmltcG9ydCBHZW5lcmljIGZyb20gIi4vR2VuZXJpYy52dWUiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlVwdGltZUt1bWEiLAogIG1peGluczogW3NlcnZpY2VdLAogIHByb3BzOiB7CiAgICBpdGVtOiBPYmplY3QKICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEdlbmVyaWM6IEdlbmVyaWMKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpbmNpZGVudDogbnVsbCwKICAgICAgaGVhcnRiZWF0OiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRhc2hib2FyZDogZnVuY3Rpb24gZGFzaGJvYXJkKCkgewogICAgICByZXR1cm4gdGhpcy5pdGVtLnNsdWcgPyB0aGlzLml0ZW0uc2x1ZyA6ICJkZWZhdWx0IjsKICAgIH0sCiAgICBzdGF0dXM6IGZ1bmN0aW9uIHN0YXR1cygpIHsKICAgICAgaWYgKCF0aGlzLmluY2lkZW50KSB7CiAgICAgICAgcmV0dXJuICIiOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5pbmNpZGVudC5pbmNpZGVudCA9PSBudWxsID8gdGhpcy5wYWdlU3RhdHVzIDogImJhZCI7CiAgICB9LAogICAgbGFzdEhlYXJ0QmVhdExpc3Q6IGZ1bmN0aW9uIGxhc3RIZWFydEJlYXRMaXN0KCkgewogICAgICB2YXIgcmVzdWx0ID0ge307CgogICAgICBmb3IgKHZhciBpZCBpbiB0aGlzLmhlYXJ0YmVhdC5oZWFydGJlYXRMaXN0KSB7CiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5oZWFydGJlYXQuaGVhcnRiZWF0TGlzdFtpZF0ubGVuZ3RoIC0gMTsKICAgICAgICByZXN1bHRbaWRdID0gdGhpcy5oZWFydGJlYXQuaGVhcnRiZWF0TGlzdFtpZF1baW5kZXhdOwogICAgICB9CgogICAgICByZXR1cm4gcmVzdWx0OwogICAgfSwKICAgIHBhZ2VTdGF0dXM6IGZ1bmN0aW9uIHBhZ2VTdGF0dXMoKSB7CiAgICAgIGlmICghdGhpcy5oZWFydGJlYXQpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KCiAgICAgIGlmIChPYmplY3Qua2V5cyh0aGlzLmhlYXJ0YmVhdC5oZWFydGJlYXRMaXN0KS5sZW5ndGggPT09IDApIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KCiAgICAgIHZhciByZXN1bHQgPSAiZ29vZCI7CiAgICAgIHZhciBoYXNVcCA9IGZhbHNlOwoKICAgICAgZm9yICh2YXIgaWQgaW4gdGhpcy5sYXN0SGVhcnRCZWF0TGlzdCkgewogICAgICAgIHZhciBiZWF0ID0gdGhpcy5sYXN0SGVhcnRCZWF0TGlzdFtpZF07CgogICAgICAgIGlmIChiZWF0LnN0YXR1cyA9PSAxKSB7CiAgICAgICAgICBoYXNVcCA9IHRydWU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJlc3VsdCA9ICJ3YXJuIjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGlmICghaGFzVXApIHsKICAgICAgICByZXN1bHQgPSAiYmFkIjsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc3VsdDsKICAgIH0sCiAgICBzdGF0dXNNZXNzYWdlOiBmdW5jdGlvbiBzdGF0dXNNZXNzYWdlKCkgewogICAgICBpZiAoIXRoaXMuaW5jaWRlbnQpIHsKICAgICAgICByZXR1cm4gIiI7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmluY2lkZW50LmluY2lkZW50KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaW5jaWRlbnQuaW5jaWRlbnQudGl0bGU7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLnBhZ2VTdGF0dXMgPT0gIndhcm4iID8gIlBhcnRpYWxseSBEZWdyYWRlZCBTZXJ2aWNlIiA6ICJBbGwgU3lzdGVtcyBPcGVyYXRpb25hbCI7CiAgICB9LAogICAgdXB0aW1lOiBmdW5jdGlvbiB1cHRpbWUoKSB7CiAgICAgIGlmICghdGhpcy5oZWFydGJlYXQpIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSBPYmplY3QudmFsdWVzKHRoaXMuaGVhcnRiZWF0LnVwdGltZUxpc3QpOwogICAgICB2YXIgcGVyY2VudCA9IGRhdGEucmVkdWNlKGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEgKyBiOwogICAgICB9LCAwKSAvIGRhdGEubGVuZ3RoIHx8IDA7CiAgICAgIHJldHVybiAocGVyY2VudCAqIDEwMCkudG9GaXhlZCgxKTsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLml0ZW0udXJsID0gIiIuY29uY2F0KHRoaXMuaXRlbS51cmwsICIvc3RhdHVzLyIpLmNvbmNhdCh0aGlzLmRhc2hib2FyZCk7CiAgICB0aGlzLmZldGNoU3RhdHVzKCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBmZXRjaFN0YXR1czogZnVuY3Rpb24gZmV0Y2hTdGF0dXMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmZldGNoKCIvYXBpL3N0YXR1cy1wYWdlLyIuY29uY2F0KHRoaXMuZGFzaGJvYXJkLCAiP2NhY2hlYnVzdD0iKS5jb25jYXQoRGF0ZS5ub3coKSkpLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGNvbnNvbGUuZXJyb3IoZSk7CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHsKICAgICAgICByZXR1cm4gX3RoaXMuaW5jaWRlbnQgPSByZXNwOwogICAgICB9KTsKICAgICAgdGhpcy5mZXRjaCgiL2FwaS9zdGF0dXMtcGFnZS9oZWFydGJlYXQvIi5jb25jYXQodGhpcy5kYXNoYm9hcmQsICI/Y2FjaGVidXN0PSIpLmNvbmNhdChEYXRlLm5vdygpKSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gY29uc29sZS5lcnJvcihlKTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcCkgewogICAgICAgIHJldHVybiBfdGhpcy5oZWFydGJlYXQgPSByZXNwOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["UptimeKuma.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAsBA,OAAA,OAAA,MAAA,qBAAA;AACA,OAAA,OAAA,MAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,YADA;AAEA,EAAA,MAAA,EAAA,CAAA,OAAA,CAFA;AAGA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AADA,GAHA;AAMA,EAAA,UAAA,EAAA;AACA,IAAA,OAAA,EAAA;AADA,GANA;AASA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,QAAA,EAAA,IADA;AAEA,MAAA,SAAA,EAAA;AAFA,KAAA;AAAA,GATA;AAaA,EAAA,QAAA,EAAA;AACA,IAAA,SAAA,EAAA,qBAAA;AACA,aAAA,KAAA,IAAA,CAAA,IAAA,GAAA,KAAA,IAAA,CAAA,IAAA,GAAA,SAAA;AACA,KAHA;AAIA,IAAA,MAAA,EAAA,kBAAA;AACA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,eAAA,EAAA;AACA;;AACA,aAAA,KAAA,QAAA,CAAA,QAAA,IAAA,IAAA,GAAA,KAAA,UAAA,GAAA,KAAA;AACA,KATA;AAUA,IAAA,iBAAA,EAAA,6BAAA;AACA,UAAA,MAAA,GAAA,EAAA;;AAEA,WAAA,IAAA,EAAA,IAAA,KAAA,SAAA,CAAA,aAAA,EAAA;AACA,YAAA,KAAA,GAAA,KAAA,SAAA,CAAA,aAAA,CAAA,EAAA,EAAA,MAAA,GAAA,CAAA;AACA,QAAA,MAAA,CAAA,EAAA,CAAA,GAAA,KAAA,SAAA,CAAA,aAAA,CAAA,EAAA,EAAA,KAAA,CAAA;AACA;;AAEA,aAAA,MAAA;AACA,KAnBA;AAoBA,IAAA,UAAA,EAAA,sBAAA;AACA,UAAA,CAAA,KAAA,SAAA,EAAA;AACA,eAAA,EAAA;AACA;;AACA,UAAA,MAAA,CAAA,IAAA,CAAA,KAAA,SAAA,CAAA,aAAA,EAAA,MAAA,KAAA,CAAA,EAAA;AACA,eAAA,EAAA;AACA;;AACA,UAAA,MAAA,GAAA,MAAA;AACA,UAAA,KAAA,GAAA,KAAA;;AACA,WAAA,IAAA,EAAA,IAAA,KAAA,iBAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,iBAAA,CAAA,EAAA,CAAA;;AACA,YAAA,IAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AACA,UAAA,KAAA,GAAA,IAAA;AACA,SAFA,MAEA;AACA,UAAA,MAAA,GAAA,MAAA;AACA;AACA;;AACA,UAAA,CAAA,KAAA,EAAA;AACA,QAAA,MAAA,GAAA,KAAA;AACA;;AACA,aAAA,MAAA;AACA,KAzCA;AA0CA,IAAA,aAAA,EAAA,yBAAA;AACA,UAAA,CAAA,KAAA,QAAA,EAAA;AACA,eAAA,EAAA;AACA;;AACA,UAAA,KAAA,QAAA,CAAA,QAAA,EAAA;AACA,eAAA,KAAA,QAAA,CAAA,QAAA,CAAA,KAAA;AACA;;AACA,aAAA,KAAA,UAAA,IAAA,MAAA,GACA,4BADA,GAEA,yBAFA;AAGA,KApDA;AAqDA,IAAA,MAAA,EAAA,kBAAA;AACA,UAAA,CAAA,KAAA,SAAA,EAAA;AACA,eAAA,CAAA;AACA;;AACA,UAAA,IAAA,GAAA,MAAA,CAAA,MAAA,CAAA,KAAA,SAAA,CAAA,UAAA,CAAA;AACA,UAAA,OAAA,GAAA,IAAA,CAAA,MAAA,CAAA,UAAA,CAAA,EAAA,CAAA;AAAA,eAAA,CAAA,GAAA,CAAA;AAAA,OAAA,EAAA,CAAA,IAAA,IAAA,CAAA,MAAA,IAAA,CAAA;AACA,aAAA,CAAA,OAAA,GAAA,GAAA,EAAA,OAAA,CAAA,CAAA,CAAA;AACA;AA5DA,GAbA;AA2EA,EAAA,OA3EA,qBA2EA;AACA,SAAA,IAAA,CAAA,GAAA,aAAA,KAAA,IAAA,CAAA,GAAA,qBAAA,KAAA,SAAA;AACA,SAAA,WAAA;AACA,GA9EA;AA+EA,EAAA,OAAA,EAAA;AACA,IAAA,WAAA,EAAA,uBAAA;AAAA;;AACA,WAAA,KAAA,4BAAA,KAAA,SAAA,wBAAA,IAAA,CAAA,GAAA,EAAA,GACA,KADA,CACA,UAAA,CAAA;AAAA,eAAA,OAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,IAAA;AAAA,eAAA,KAAA,CAAA,QAAA,GAAA,IAAA;AAAA,OAFA;AAIA,WAAA,KAAA,sCACA,KAAA,SADA,wBACA,IAAA,CAAA,GAAA,EADA,GAGA,KAHA,CAGA,UAAA,CAAA;AAAA,eAAA,OAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AAAA,OAHA,EAIA,IAJA,CAIA,UAAA,IAAA;AAAA,eAAA,KAAA,CAAA,SAAA,GAAA,IAAA;AAAA,OAJA;AAKA;AAXA;AA/EA,CAAA","sourcesContent":["<template>\n  <Generic :item=\"item\">\n    <template #content>\n      <p class=\"title is-4\">{{ item.name }}</p>\n      <p class=\"subtitle is-6\">\n        <template v-if=\"item.subtitle\">\n          {{ item.subtitle }}\n        </template>\n        <template v-else-if=\"status\">\n          {{ statusMessage }}\n        </template>\n      </p>\n    </template>\n    <template #indicator>\n      <div v-if=\"status\" class=\"status\" :class=\"status\">\n        {{ uptime }}&percnt;\n      </div>\n    </template>\n  </Generic>\n</template>\n\n<script>\nimport service from \"@/mixins/service.js\";\nimport Generic from \"./Generic.vue\";\n\nexport default {\n  name: \"UptimeKuma\",\n  mixins: [service],\n  props: {\n    item: Object,\n  },\n  components: {\n    Generic,\n  },\n  data: () => ({\n    incident: null,\n    heartbeat: null,\n  }),\n  computed: {\n    dashboard: function () {\n      return this.item.slug ? this.item.slug : \"default\";\n    },\n    status: function () {\n      if (!this.incident) {\n        return \"\";\n      }\n      return this.incident.incident == null ? this.pageStatus : \"bad\";\n    },\n    lastHeartBeatList: function () {\n      let result = {};\n\n      for (let id in this.heartbeat.heartbeatList) {\n        let index = this.heartbeat.heartbeatList[id].length - 1;\n        result[id] = this.heartbeat.heartbeatList[id][index];\n      }\n\n      return result;\n    },\n    pageStatus: function () {\n      if (!this.heartbeat) {\n        return \"\";\n      }\n      if (Object.keys(this.heartbeat.heartbeatList).length === 0) {\n        return \"\";\n      }\n      let result = \"good\";\n      let hasUp = false;\n      for (let id in this.lastHeartBeatList) {\n        let beat = this.lastHeartBeatList[id];\n        if (beat.status == 1) {\n          hasUp = true;\n        } else {\n          result = \"warn\";\n        }\n      }\n      if (!hasUp) {\n        result = \"bad\";\n      }\n      return result;\n    },\n    statusMessage: function () {\n      if (!this.incident) {\n        return \"\";\n      }\n      if (this.incident.incident) {\n        return this.incident.incident.title;\n      }\n      return this.pageStatus == \"warn\"\n        ? \"Partially Degraded Service\"\n        : \"All Systems Operational\";\n    },\n    uptime: function () {\n      if (!this.heartbeat) {\n        return 0;\n      }\n      const data = Object.values(this.heartbeat.uptimeList);\n      const percent = data.reduce((a, b) => a + b, 0) / data.length || 0;\n      return (percent * 100).toFixed(1);\n    },\n  },\n  created() {\n    this.item.url = `${this.item.url}/status/${this.dashboard}`;\n    this.fetchStatus();\n  },\n  methods: {\n    fetchStatus: function () {\n      this.fetch(`/api/status-page/${this.dashboard}?cachebust=${Date.now()}`)\n        .catch((e) => console.error(e))\n        .then((resp) => (this.incident = resp));\n\n      this.fetch(\n        `/api/status-page/heartbeat/${this.dashboard}?cachebust=${Date.now()}`\n      )\n        .catch((e) => console.error(e))\n        .then((resp) => (this.heartbeat = resp));\n    },\n  },\n};\n</script>\n\n<style scoped lang=\"scss\">\n.status {\n  font-size: 0.8rem;\n  color: var(--text-title);\n\n  &.good:before {\n    background-color: #94e185;\n    border-color: #78d965;\n    box-shadow: 0 0 5px 1px #94e185;\n  }\n\n  &.warn:before {\n    background-color: #f8a306;\n    border-color: #e1b35e;\n    box-shadow: 0 0 5px 1px #f8a306;\n  }\n\n  &.bad:before {\n    background-color: #c9404d;\n    border-color: #c42c3b;\n    box-shadow: 0 0 5px 1px #c9404d;\n  }\n\n  &:before {\n    content: \" \";\n    display: inline-block;\n    width: 7px;\n    height: 7px;\n    margin-right: 10px;\n    border: 1px solid #000;\n    border-radius: 7px;\n  }\n}\n</style>\n"],"sourceRoot":"src/components/services"}]}